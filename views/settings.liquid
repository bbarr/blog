
{% layout "layout.liquid" %}

{% block content %}

<div class="flex" x-data="state()">

  <sidebar class="h-screen w-56 bg-gray-100 py-6">
    <div class="px-6">
      <h1>{{ site.name }}</h1>
      <h2 class="uppercase text-gray-800 text-sm">Prosaic</h2>
      <p class="uppercase text-gray-600 mt-10 mb-2">Category</p>
    </div>
    <nav>
      <a class="side-menu-link" href="/dashboard">{% include '_icon.liquid', name: 'page' %}Posts</a>
      <a class="side-menu-link active" href="/settings">{% include '_icon.liquid', name: 'cog' %}Settings</a>
    </nav>
  </sidebar>

  <div class="flex-1 p-6 border-l border-r max-w-lg">
    <h2 class="border-b pb-4 font-medium text-lg">User settings</h1>
    <form x-on:submit="saveUser()" class="space-y-4">
      <div>
        <label class="field-label" for="name">Name</label>
        <input class="field-input" id="name" type="text">
      </div>
      <div>
        <label class="field-label" for="email">Email</label>
        <input class="field-input" id="email" type="email">
      </div>
      <div>
        <label class="field-label" for="picture">Profile Picture</label>
        <input class="field-input" id="picture" type="file">
      </div>
    </form>
    <h2 class="border-b mt-8 pb-4 font-medium text-lg">Blog settings</h1>
    <form x-on:submit="saveBlog()" class="space-y-4">
      <div>
        <label class="field-label" for="title">Title</label>
        <input class="field-input" id="title" type="text">
      </div>
      <div>
        <label class="field-label" for="description">Description</label>
        <input class="field-input" id="description" type="text">
      </div>
      <div>
        <label class="field-label" for="timezone-offset">Time Zone</label>
        <select class="field-select" id="timezone-offset">
          <option value="-12:00">(GMT -12:00) Eniwetok, Kwajalein</option>
          <option value="-11:00">(GMT -11:00) Midway Island, Samoa</option>
          <option value="-10:00">(GMT -10:00) Hawaii</option>
          <option value="-09:50">(GMT -9:30) Taiohae</option>
          <option value="-09:00">(GMT -9:00) Alaska</option>
          <option value="-08:00">(GMT -8:00) Pacific Time (US &amp; Canada)</option>
          <option value="-07:00">(GMT -7:00) Mountain Time (US &amp; Canada)</option>
          <option value="-06:00">(GMT -6:00) Central Time (US &amp; Canada), Mexico City</option>
          <option value="-05:00">(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima</option>
          <option value="-04:50">(GMT -4:30) Caracas</option>
          <option value="-04:00">(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz</option>
          <option value="-03:50">(GMT -3:30) Newfoundland</option>
          <option value="-03:00">(GMT -3:00) Brazil, Buenos Aires, Georgetown</option>
          <option value="-02:00">(GMT -2:00) Mid-Atlantic</option>
          <option value="-01:00">(GMT -1:00) Azores, Cape Verde Islands</option>
          <option value="+00:00" selected="selected">(GMT) Western Europe Time, London, Lisbon, Casablanca</option>
          <option value="+01:00">(GMT +1:00) Brussels, Copenhagen, Madrid, Paris</option>
          <option value="+02:00">(GMT +2:00) Kaliningrad, South Africa</option>
          <option value="+03:00">(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg</option>
          <option value="+03:50">(GMT +3:30) Tehran</option>
          <option value="+04:00">(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi</option>
          <option value="+04:50">(GMT +4:30) Kabul</option>
          <option value="+05:00">(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent</option>
          <option value="+05:50">(GMT +5:30) Bombay, Calcutta, Madras, New Delhi</option>
          <option value="+05:75">(GMT +5:45) Kathmandu, Pokhara</option>
          <option value="+06:00">(GMT +6:00) Almaty, Dhaka, Colombo</option>
          <option value="+06:50">(GMT +6:30) Yangon, Mandalay</option>
          <option value="+07:00">(GMT +7:00) Bangkok, Hanoi, Jakarta</option>
          <option value="+08:00">(GMT +8:00) Beijing, Perth, Singapore, Hong Kong</option>
          <option value="+08:75">(GMT +8:45) Eucla</option>
          <option value="+09:00">(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk</option>
          <option value="+09:50">(GMT +9:30) Adelaide, Darwin</option>
          <option value="+10:00">(GMT +10:00) Eastern Australia, Guam, Vladivostok</option>
          <option value="+10:50">(GMT +10:30) Lord Howe Island</option>
          <option value="+11:00">(GMT +11:00) Magadan, Solomon Islands, New Caledonia</option>
          <option value="+11:50">(GMT +11:30) Norfolk Island</option>
          <option value="+12:00">(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka</option>
          <option value="+12:75">(GMT +12:45) Chatham Islands</option>
          <option value="+13:00">(GMT +13:00) Apia, Nukualofa</option>
          <option value="+14:00">(GMT +14:00) Line Islands, Tokelau</option>
        </select>
      </div>
      <div>
        <label class="field-label" for="favicon">Favicon</label>
        <input class="field-input" id="favicon" type="file">
      </div>
      <div>
        <label class="field-label" for="subdomain">Subdomain</label>
        <input class="field-input" id="subdomain" type="text" disabled>
      </div>
      <div class="w-48">
        <button class="button">Update billing</button>
      </div>
    </form>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/highlight.js/latest/highlight.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/highlight.js/latest/styles/github.min.css">
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
<link rel="stylesheet" href="/previews/{{ site.themeId }}/index.css">
<script>
  function state() {

    const api = {
      firstPost: {% if posts.length > 0 %}{{ posts | first | json }}{% else %}null{% endif %},
      preview: '',
      selectedId: null,
      create() {
        window.location.href = `/editor/new`
      },
      edit() {
        window.location.href = `/editor/${api.selectedId}`
      },
      async selectPost(id) {
        this.selectedId = id
        const content = await fetch(`/api/posts/${id}/content`).then(resp => resp.json()).then(json => json.data)
        this.preview = EasyMDE.prototype.markdown.call({ options: { renderingConfig: { codeSyntaxHighlighting: true } } }, content)
      }
    }

    return api
  }
</script>

{% endblock %}
